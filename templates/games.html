{% extends "layout.html" %}

{% block title %}FunGames - Jeux{% endblock %}

{% block extra_css %}
<link href="{{ url_for('static', filename='css/games.css') }}" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="games-header animated fadeInDown">
    <h1 class="display-5 fw-bold text-center text-gradient">Arcade de Mini-Jeux</h1>
    <p class="lead text-center mb-5">Choisis ton jeu et montre ton talent ! ðŸŽ®</p>
</div>

<div class="nav-games mb-4">
    <ul class="nav nav-pills nav-fill">
        <li class="nav-item">
            <a class="nav-link active" href="#clicker" data-bs-toggle="tab">
                <i class="fas fa-mouse-pointer"></i> Clicker
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#reflex" data-bs-toggle="tab">
                <i class="fas fa-bolt"></i> RÃ©flexes
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#memory" data-bs-toggle="tab">
                <i class="fas fa-brain"></i> MÃ©moire
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#puzzle" data-bs-toggle="tab">
                <i class="fas fa-puzzle-piece"></i> Puzzle
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link" href="#typing" data-bs-toggle="tab">
                <i class="fas fa-keyboard"></i> Typing
            </a>
        </li>
    </ul>
</div>

<div class="tab-content" id="gamesContent">
    <!-- Clicker Game -->
    <div class="tab-pane fade show active" id="clicker">
        <div class="game-container animated fadeIn">
            <div class="game-header">
                <h2>Clicker Challenge</h2>
                <p>Clique aussi vite que possible pendant 10 secondes !</p>
            </div>
            <div class="game-body text-center">
                <div class="game-stats mb-4">
                    <div class="stat-item">
                        <span id="clicker-counter">0</span>
                        <label>Clics</label>
                    </div>
                    <div class="stat-item">
                        <span id="clicker-timer">10</span>
                        <label>Secondes</label>
                    </div>
                    <div class="stat-item">
                        <span id="clicker-highscore">0</span>
                        <label>Record</label>
                    </div>
                </div>
                
                <div id="clicker-game-area">
                    <button id="clicker-btn" class="game-button">
                        <i class="fas fa-mouse-pointer"></i>
                        <span>CLIQUE ICI</span>
                    </button>
                </div>
                
                <div id="clicker-result" class="game-result mt-4" style="display: none;">
                    <h3>Temps Ã©coulÃ© !</h3>
                    <p>Tu as cliquÃ© <span id="final-score">0</span> fois en 10 secondes.</p>
                    <p id="clicker-message"></p>
                    <button id="clicker-restart" class="btn btn-primary mt-3">Rejouer</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Reflex Game -->
    <div class="tab-pane fade" id="reflex">
        <div class="game-container animated fadeIn">
            <div class="game-header">
                <h2>Jeu de RÃ©flexe</h2>
                <p>Attends que la couleur change et clique aussi vite que possible !</p>
            </div>
            <div class="game-body text-center">
                <div class="game-stats mb-4">
                    <div class="stat-item">
                        <span id="reflex-current">0.000</span>
                        <label>Secondes</label>
                    </div>
                    <div class="stat-item">
                        <span id="reflex-best">0.000</span>
                        <label>Meilleur</label>
                    </div>
                    <div class="stat-item">
                        <span id="reflex-avg">0.000</span>
                        <label>Moyenne</label>
                    </div>
                </div>
                
                <div id="reflex-game-area">
                    <div id="reflex-target" class="reflex-wait">
                        <p id="reflex-message">Attends le changement de couleur...</p>
                    </div>
                </div>
                
                <div class="mt-4">
                    <button id="reflex-restart" class="btn btn-primary">Recommencer</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Memory Game -->
    <div class="tab-pane fade" id="memory">
        <div class="game-container animated fadeIn">
            <div class="game-header">
                <h2>Memory Master</h2>
                <p>MÃ©morise la sÃ©quence et reproduis-la correctement !</p>
            </div>
            <div class="game-body text-center">
                <div class="game-stats mb-4">
                    <div class="stat-item">
                        <span id="memory-level">1</span>
                        <label>Niveau</label>
                    </div>
                    <div class="stat-item">
                        <span id="memory-sequence">0</span>
                        <label>SÃ©quence</label>
                    </div>
                    <div class="stat-item">
                        <span id="memory-highscore">0</span>
                        <label>Record</label>
                    </div>
                </div>
                
                <div id="memory-game-area">
                    <div class="memory-grid">
                        <div class="memory-btn" id="memory-btn-0" data-index="0"></div>
                        <div class="memory-btn" id="memory-btn-1" data-index="1"></div>
                        <div class="memory-btn" id="memory-btn-2" data-index="2"></div>
                        <div class="memory-btn" id="memory-btn-3" data-index="3"></div>
                    </div>
                    
                    <div id="memory-status" class="my-3">Appuie sur DÃ©marrer pour jouer</div>
                    
                    <button id="memory-start" class="btn btn-primary mt-2">DÃ©marrer</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Puzzle Game -->
    <div class="tab-pane fade" id="puzzle">
        <div class="game-container animated fadeIn">
            <div class="game-header">
                <h2>Mini Puzzle</h2>
                <p>Aligne les tuiles dans le bon ordre !</p>
            </div>
            <div class="game-body text-center">
                <div class="game-stats mb-4">
                    <div class="stat-item">
                        <span id="puzzle-moves">0</span>
                        <label>Mouvements</label>
                    </div>
                    <div class="stat-item">
                        <span id="puzzle-timer">00:00</span>
                        <label>Temps</label>
                    </div>
                    <div class="stat-item">
                        <span id="puzzle-best">--:--</span>
                        <label>Record</label>
                    </div>
                </div>
                
                <div id="puzzle-game-area">
                    <div class="puzzle-grid">
                        <!-- Les tuiles seront gÃ©nÃ©rÃ©es en JavaScript -->
                    </div>
                    
                    <div id="puzzle-status" class="mt-3">DÃ©place les tuiles pour les remettre en ordre</div>
                    
                    <button id="puzzle-restart" class="btn btn-primary mt-3">Nouveau Puzzle</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Typing Game -->
    <div class="tab-pane fade" id="typing">
        <div class="game-container animated fadeIn">
            <div class="game-header">
                <h2>Speed Typing</h2>
                <p>Tape les mots qui apparaissent aussi vite que possible !</p>
            </div>
            <div class="game-body text-center">
                <div class="game-stats mb-4">
                    <div class="stat-item">
                        <span id="typing-score">0</span>
                        <label>Score</label>
                    </div>
                    <div class="stat-item">
                        <span id="typing-timer">60</span>
                        <label>Secondes</label>
                    </div>
                    <div class="stat-item">
                        <span id="typing-highscore">0</span>
                        <label>Record</label>
                    </div>
                </div>
                
                <div id="typing-game-area">
                    <div id="typing-word" class="typing-word">Appuie sur DÃ©marrer</div>
                    
                    <div class="typing-input-container mt-4">
                        <input type="text" id="typing-input" class="typing-input" placeholder="Tape ici..." disabled>
                    </div>
                    
                    <div id="typing-status" class="mt-3">Tape les mots aussi vite que possible !</div>
                    
                    <button id="typing-start" class="btn btn-primary mt-3">DÃ©marrer</button>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Global Game Controls -->
<div class="global-controls mt-5 text-center">
    <div class="highscores-box animated fadeInUp">
        <h3><i class="fas fa-trophy"></i> Meilleurs Scores</h3>
        <table class="table table-sm">
            <thead>
                <tr>
                    <th>Jeu</th>
                    <th>Record</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Clicker</td>
                    <td id="hs-clicker">{{ highscores.clicker }}</td>
                </tr>
                <tr>
                    <td>RÃ©flexes</td>
                    <td id="hs-reflex">{{ highscores.reflex }}</td>
                </tr>
                <tr>
                    <td>MÃ©moire</td>
                    <td id="hs-memory">{{ highscores.memory }}</td>
                </tr>
                <tr>
                    <td>Puzzle</td>
                    <td id="hs-puzzle">{{ highscores.puzzle }}</td>
                </tr>
                <tr>
                    <td>Typing</td>
                    <td id="hs-typing">{{ highscores.typing }}</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

{% if not session.get('username') %}
<div class="username-alert mt-4 animated fadeInUp">
    <div class="alert alert-info d-flex align-items-center" role="alert">
        <i class="fas fa-info-circle me-2"></i>
        <div>
            Connecte-toi pour sauvegarder tes scores !
            <button class="btn btn-sm btn-primary ms-3" data-bs-toggle="modal" data-bs-target="#usernameModal">
                DÃ©finir mon pseudo
            </button>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/games/clicker.js') }}"></script>
<script src="{{ url_for('static', filename='js/games/reflex.js') }}"></script>
<script src="{{ url_for('static', filename='js/games/memory.js') }}"></script>
<script src="{{ url_for('static', filename='js/games/puzzle.js') }}"></script>
<script src="{{ url_for('static', filename='js/games/typing.js') }}"></script>
{% endblock %}